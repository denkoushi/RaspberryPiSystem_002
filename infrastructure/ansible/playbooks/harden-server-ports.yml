---
- name: Harden server by closing unneeded ports
  hosts: server
  gather_facts: true
  become: true
  vars:
    repo_path: /opt/RaspberryPiSystem_002
  tasks:
    - name: Apply server security tasks (UFW + disable unused services)
      ansible.builtin.import_role:
        name: server
        tasks_from: security.yml

    - name: Apply server monitoring tasks (security-monitor)
      ansible.builtin.import_role:
        name: server
        tasks_from: monitoring.yml

