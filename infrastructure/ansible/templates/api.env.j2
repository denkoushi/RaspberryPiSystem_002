# API環境変数ファイル
# このファイルはAnsibleで管理されています
# 機密情報はAnsible Vaultで暗号化するか、inventory.ymlで変数として管理してください

NODE_ENV={{ api_node_env | default('production') }}
PORT={{ api_port | default(8080) }}
HOST={{ api_host | default('0.0.0.0') }}
DATABASE_URL={{ api_database_url | default('postgresql://postgres:postgres@db:5432/borrow_return') }}
# NOTE: 本番では強いsecretが必須。Ansible側で「inventoryの値が弱い/未設定でも既存の.envから復元」できるよう
# api_jwt_*_effective を優先して使用する（未設定の場合は従来変数へフォールバック）。
JWT_ACCESS_SECRET={{ api_jwt_access_secret_effective | default(api_jwt_access_secret) }}
JWT_REFRESH_SECRET={{ api_jwt_refresh_secret_effective | default(api_jwt_refresh_secret) }}
TOKEN_EXPIRES_IN={{ api_token_expires_in | default('15m') }}
REFRESH_TOKEN_EXPIRES_IN={{ api_refresh_token_expires_in | default('7d') }}
LOG_LEVEL={{ api_log_level | default('info') }}
SIGNAGE_RENDER_INTERVAL_SECONDS={{ api_signage_render_interval_seconds | default(30) }}
SIGNAGE_RENDER_WIDTH={{ api_signage_render_width | default(1920) }}
SIGNAGE_RENDER_HEIGHT={{ api_signage_render_height | default(1080) }}
SIGNAGE_TIMEZONE={{ api_signage_timezone | default('Asia/Tokyo') }}
PHOTO_STORAGE_DIR={{ api_photo_storage_dir | default('/app/storage/photos') }}
ALERTS_DIR={{ api_alerts_dir | default('/app/alerts') }}

