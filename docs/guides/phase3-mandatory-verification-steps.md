# Phase 3必須検証手順書

最終更新: 2025-12-17

## 検証環境

- **Raspberry Pi 5**: サーバー（API/DB/Web UI）
- **IPアドレス**: `100.106.158.2`（Tailscale経由）
- **ブランチ**: `feature/dropbox-csv-import-phase1`
- **最新コミット**: `03aacf8`

## 検証項目1: 実際のデータファイルを使用したエンドツーエンドテスト

### ステップ1: テスト用CSVファイルの準備

**ユーザー操作が必要**: ✅

1. **テスト用CSVファイルを作成**
   - `employees.csv`（従業員データ）
   - `items.csv`（アイテムデータ）

2. **CSVファイルの形式**:
   ```csv
   # employees.csv
   employeeCode,displayName,nfcTagUid,department,contact,status
   TEST001,テスト従業員1,04C362E1330289,テスト部,090-1234-5678,ACTIVE
   TEST002,テスト従業員2,04B34411340289,テスト部,090-2345-6789,ACTIVE
   ```

   ```csv
   # items.csv
   itemCode,name,nfcTagUid,category,storageLocation,status,notes
   TEST001,テスト工具1,04DE8366BC2A81,工具,テスト庫A,AVAILABLE,テスト用
   TEST002,テスト工具2,04C393C1330289,工具,テスト庫B,AVAILABLE,テスト用
   ```

3. **Dropboxにアップロード**
   - Dropboxの`/test/`フォルダに配置
   - ファイル名: `employees.csv`, `items.csv`

**確認**: Dropboxにファイルが存在することを確認してください。

### ステップ2: CSVインポートスケジュールの作成

**AIが実施可能**: ✅

スケジュールを作成するコマンドを準備します。

### ステップ3: スケジュール実行と結果確認

**AIが実施可能**: ✅（一部）

API経由でスケジュールを実行し、結果を確認します。

### ステップ4: バックアップ履歴の確認

**AIが実施可能**: ✅

バックアップ履歴APIを呼び出して確認します。

### ステップ5: Dropboxからのリストアテスト

**ユーザー操作が必要**: ✅（バックアップファイルの準備）

事前にバックアップを作成してからリストアをテストします。

## 検証項目2: エラーハンドリングの確認

### ステップ1: CSVインポート失敗時の動作確認

**AIが実施可能**: ✅

不正なCSVファイルを配置してインポートを実行します。

### ステップ2: バックアップ失敗時の動作確認

**AIが実施可能**: ✅（一部）

Dropbox APIエラーをシミュレートします。

### ステップ3: リストア失敗時の動作確認

**AIが実施可能**: ✅（一部）

不正なバックアップファイルを使用してリストアをテストします。

---

## 検証開始

まず、現在の環境を確認してから、ステップ1から開始します。
