# USB一括登録機能の仕様説明

最終更新: 2025-11-24

## 現在の実装仕様

### 実装されている機能

**ブラウザ経由のCSVファイルアップロード機能**

- 管理画面の「一括登録」ページから、CSVファイルをアップロードする機能
- USBメモリからPCにコピーしたCSVファイルを、ブラウザから選択してアップロード
- 手動操作が必要（マウス操作でファイル選択）

### 動作フロー

1. USBメモリをPCに接続
2. USBメモリからCSVファイル（`employees.csv`, `items.csv`）をPCにコピー
3. ブラウザで管理画面にログイン
4. 「一括登録」ページにアクセス
5. ファイル選択ボタンからCSVファイルを選択
6. 「取り込み開始」ボタンをクリック
7. アップロードが完了し、データが登録される

## 想定されていた仕様との違い

### 想定されていた仕様（推測）

**USBメモリからの自動インポート機能**

- USBメモリをラズパイ5に接続
- USBメモリが検出されたら自動的にCSVファイルを読み込む
- 自動的にデータをインポートする
- 手動操作が不要

### 違いのまとめ

| 項目 | 現在の実装 | 想定されていた仕様 |
|------|-----------|------------------|
| 操作 | 手動（ブラウザからファイル選択） | 自動（USB接続で自動検出） |
| 場所 | PCからブラウザ経由でアップロード | ラズパイ5に直接USB接続 |
| タイミング | ユーザーがボタンをクリック | USB接続時に自動実行 |

## どちらの仕様が適切か？

### 現在の実装（ブラウザ経由）のメリット

- ✅ 実装が簡単
- ✅ 既存のWeb UIと統合されている
- ✅ エラーハンドリングが分かりやすい
- ✅ 取り込み履歴が確認できる

### 自動インポート機能のメリット

- ✅ 手動操作が不要
- ✅ USBメモリを接続するだけで完了
- ✅ より使いやすい

## 推奨事項

### 現時点での推奨

**現在の実装（ブラウザ経由）を維持**

理由：
1. 既に実装済みで動作している
2. エラーハンドリングや履歴確認が可能
3. セキュリティ面で安全（認証が必要）

### 将来的な改善案

**自動インポート機能を追加実装**

実装方法：
1. USBメモリの自動検出機能（udevルールなど）
2. CSVファイルの自動読み込み
3. バックグラウンドジョブとして実行
4. 管理画面でジョブの状態を確認

## 結論

現在の実装は「ブラウザ経由のCSVファイルアップロード機能」です。USBメモリからPCにコピーしたCSVファイルを、ブラウザから選択してアップロードする仕様です。

自動インポート機能が必要な場合は、別途実装が必要です。

