---
description: 疎結合・スケーラブル・モジュール化を維持するための設計規律。
alwaysApply: true
---

# コア: アーキテクチャ（Always）

## 境界と依存方向

- 依存は「**安定→不安定**」へ向ける（変更頻度が高い詳細に、重要なロジックを依存させない）
- UI/アプリ層が、DB/HTTP/FSなどの詳細へ直結しない（アダプタ/境界で隔離する）
- 共有モジュールは「便利だから」で膨らませない（依存の雪だるまを防ぐ）

## 契約（API/型/データ）と互換性

- 互換性を壊す変更は原則避け、必要なら段階的移行（deprecate→移行→削除）
- 入出力の契約はテスト/型/スキーマで固定し、暗黙仕様を増やさない

## 横断関心の扱い

- ログ/エラー/認可/リトライなど横断関心は共通化し、呼び出し側に散らさない
- 例外: ごく局所のUI表現・局所の最適化（境界を越えない）

## 変更容易性のチェック（小さく）

- その変更は「どのモジュール境界」に属するか？
- 境界を跨ぐなら、インターフェース/アダプタで影響を閉じ込められるか？
